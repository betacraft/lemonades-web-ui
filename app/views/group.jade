script(type='text/javascript').
  /*!
   * Bootstrap YouTube Popup Player Plugin
   * http://lab.abhinayrathore.com/bootstrap-youtube/
   * https://github.com/abhinayrathore/Bootstrap-Youtube-Popup-Player-Plugin
   */
  (function (g) {
    var j = null, b = null, h = null, o = null, f = 5;
    var d = {
      init: function (p) {
        p = g.extend({}, g.fn.YouTubeModal.defaults, p);
        if (j == null) {
          j = g('<div class="modal' + p.cssClass + '" id="YouTubeModal" role="dialog" aria-hidden="true">');
          var q = '<div class="modal-dialog" id="YouTubeModalDialog"><div class="modal-content" id="YouTubeModalContent"><div class="modal-body" id="YouTubeModalBody" style="padding:0;"></div></div></div>';
          j.html(q).hide().appendTo("body");
          b = g("#YouTubeModalDialog");
          h = g("#YouTubeModalTitle");
          o = g("#YouTubeModalBody");
          j.modal({show: false}).on("hide.bs.modal", m)
        }
        return this.each(function () {
          var s = g(this);
          var r = s.data("YouTube");
          if (!r) {
            s.data("YouTube", {target: s});
            g(s).bind("click.YouTubeModal", function () {
              var w = p.youtubeId;
              if (g.trim(w) == "" && s.is("a")) {
                w = i(s.attr("href"))
              }
              if (g.trim(w) == "" || w === false) {
                w = s.attr(p.idAttribute)
              }
              var t = g.trim(p.title);
              if (t == "") {
                if (p.useYouTubeTitle) {
                  c(w)
                } else {
                  t = s.attr("title")
                }
              }
              if (t) {
                n(t)
              }
              e(p.width);
              var v = l(w, p);
              var u = a(v, p.width, p.height);
              k(u);
              j.modal("show");
              return false
            })
          }
        })
      }, destroy: function () {
        return this.each(function () {
          g(this).unbind(".YouTubeModal").removeData("YouTube")
        })
      }
    };

    function n(p) {
      h.html(g.trim(p))
    }

    function k(p) {
      o.html(p)
    }

    function m() {
      n("");
      k("")
    }

    function e(p) {
      b.css({width: p + (f * 2)})
    }

    function l(q, p) {
      return ["//www.youtube.com/embed/", q, "?rel=0&showsearch=0&autohide=", p.autohide, "&autoplay=1","&controls=", p.controls, "&fs=", p.fs, "&loop=", p.loop, "&showinfo=", p.showinfo, "&color=", p.color, "&theme=", p.theme, "&wmode=transparent"].join("")
    }

    function a(q, r, p) {
      return ['<iframe title="YouTube video player" width="', r, '" height="', p, '" ', 'style="margin:0; padding:0; box-sizing:border-box; border:0; -webkit-border-radius:5px; -moz-border-radius:5px; border-radius:5px; margin:', (f - 1), 'px;" ', 'src="', q, '" frameborder="0" allowfullscreen seamless></iframe>'].join("")
    }

    function c(q) {
      var p = ["https://gdata.youtube.com/feeds/api/videos/", q, "?v=2&alt=json"].join("");
      g.ajax({
        url: p, dataType: "jsonp", cache: true, success: function (r) {
          n(r.entry.title.$t)
        }
      })
    }

    function i(p) {
      var r = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/;
      var q = p.match(r);
      if (q && q[2].length == 11) {
        return q[2]
      } else {
        return false
      }
    }

    g.fn.YouTubeModal = function (p) {
      if (d[p]) {
        return d[p].apply(this, Array.prototype.slice.call(arguments, 1))
      } else {
        if (typeof p === "object" || !p) {
          return d.init.apply(this, arguments)
        } else {
          g.error("Method " + p + " does not exist on Bootstrap.YouTubeModal")
        }
      }
    };
    g.fn.YouTubeModal.defaults = {
      youtubeId: "",
      title: "",
      useYouTubeTitle: true,
      idAttribute: "rel",
      cssClass: "YouTubeModal",
      width: 640,
      height: 480,
      autohide: 2,
      autoplay: 1,
      color: "red",
      controls: 1,
      fs: 1,
      loop: 0,
      showinfo: 0,
      theme: "dark"
    }
  })(jQuery);
  $(function () {
    $(".youtube").YouTubeModal({autoplay:1, width:640, height:480});
  });
section(ng-init="init()")
  div.container-fluid.bgGray(style="padding:10px;")
    div.row
      div.col-md-12.col-sm-12
        div.col-md-2.col-sm-2
          a(ng-click="dashboard()")
            img.img-responsive.text-center(src="images/innerPageLogo.png",width="160px;")
        div.col-md-4.pull-right.text-right.col-sm-2.col-md-offset-6
          a.btn.btn-primary-border.youtube(href='http://www.youtube.com/embed/_F6rBAHOrDs?autplay=1') How It Works ?
          .btn.btn-primary-border(ng-click="dashboard()")="More Groups"
          .btn.btn-primary-border(ng-hide="sessionKey",ng-click="$root.goToLogin()")="Login To Buy"
          .btn.btn-primary-border(ng-show="sessionKey",ng-click="logout()")="Logout"
div.container
  div.row
    div.col-lg-4(style="margin-top:25px;")
      div.sideImagewrapp(style="height:450px;")
        div.bigPink100pBtn(ng-show="sessionKey && group !== undefined && group.is_joined")="You are part of this group"
        a.bigPink100pBtn(ng-hide="sessionKey",ng-click="login()")="Login to Join"
        a.bigPink100pBtn(ng-show="sessionKey && group !== undefined && !group.is_joined",ng-click="joinGroup()")="I am interested"
        div(style="width:100%;")
          img.image-center(src="{{group.product.product_image}}",style="max-height:300px;max-width:300px;")
    div.col-lg-8
      div.row
        div.col-md-12.marginTop25px
          h2="{{group.product.name}}"
      hr
      div.row
        div.col-md-12.marginTop5px
      div.row
        div.col-md-12
          div.priceBox
            p(style="font-size=25px;")="Online Market Price"
              a(href="{{group.product.product_link}}",target="_blank",ng-show="group.product.product_link.indexOf('flipkart')!==-1")=" (Flipkart)"
              a(href="{{group.product.product_link}}",target="_blank",ng-show="group.product.product_link.indexOf('amazon')!==-1")=" (Amazon)"
            h3="{{group.product.price_value | currency:'Rs. '}}"
      div.row(style="margin-top:10px;")
        div.col-md-12.text-center(style="margin-left:-20px;margin-top:10px;")
          div.col-md-2.col-sm-12.text-center
            div.fb-share-button(data-href="http://www.lemonades.in/#/group/{{groupId}}?utm_source=fb_share_landing_page&utm_medium=website&utm_campaign=share",data-layout="button_count")
          div.col-md-2.text-center.col-sm-12
            a.twitter-share-button(href="https://twitter.com/share",data-size="medium",data-text="{{shareText}}",data-url= "http://www.lemonades.in/#/group/{{groupId}}?utm_source=tw_share_landing_page&utm_medium=website&utm_campaign=share")="Tweet"
          div.col-md-2.text-center.col-sm-12
            a.g-plus(data-action="share",data-annotation="bubble",data-height="24",data-href="http://www.lemonades.in/#/group/{{groupId}}?utm_source=gplus_landing_page&utm_medium=website&utm_campaign=share")
      div.row
        div.col-md-12
          div.interestedBox(style="margin-right:5px;")
            h1="{{group.interested_users_count}}"
            p(style="font-size:20px;")="Joined"
          div.interestedBox(style="margin-right:5px;",ng-show="group.interested_users_count < group.required_user_count")
            h1()="{{group.required_user_count-group.interested_users_count}}"
            p(style="font-size:20px;")="Remaining"
          div.interestedBox(style="margin-right:5px;",ng-show="group.interested_users_count < group.required_user_count")
            h1()="{{group.expires_in}}"
            p(style="font-size:20px;")="Days Remaining"
          div.interestedBox(ng-show="group.interested_users_count >= group.required_user_count")
            h1()="{{8 - group.reached_goal}} Days"
            p(style="font-size:20px;")="We are collecting deals for this group in {{8 - group.reached_goal}} Days."
      div.row
        div.col-md-12(style="margin-top:15px;")
          p(style="font-size:15px;")="We will required minimum "
            span(style="color:#ff227c;")="{{group.required_user_count}} people "
            | interested in this product to get you an attractive deal.
      hr
      div.row(style="margin-left:1px;margin-top:15px;",role="tabpanel")
        ul.nav.nav-tabs(role="tablist")
          li.active(role="presentation")
            a(showtab="",href="#updates",aria-controls="updates",role="tab",data-toggle="tab",style="font-size:17px;")="Updates"
          li(role="presentation")
            a(showtab="",href="#discussions",aria-controls="discussions",role="tab",data-toggle="tab",style="font-size:17px;")="Discussions"
        div.tab-content
          div#updates.tab-pane.active(role="tabpanel")
            div(ng-hide="group.updates")
              div.row
                div.col-md-10
                  div.bs-callout-l.bs-callout-update
                    p="We have been notified about this group and We are talking to the vendors to get a list of deals they can offer, once we have {{group.required_user_count}} people interested in this product."
                    p.pull-right(style="font-size:12px")="{{group.created_at | date:'dd-MMM-yyyy HH:mm a'}}"
          div#discussions.tab-pane(role="tabpanel",style="overflow-x:hidden;")
            div.fb-comments(data-href="http://www.lemonades.in/#/group/{{groupId}}?utm_source=fb_comments&utm_medium=website&utm_campaign=comments",data-numposts="5",data-colorscheme="light",style="width:100%;")

#fb-root
script(type="text/javascript").
  var count = 0;
  FB = null;
  (function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    count = count + 1;
    js = d.createElement(s);
    js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=1608020712745966&version=v2.3";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
  (function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https';
    js = d.createElement(s);
    js.id = id;
    js.src = p + '://platform.twitter.com/widgets.js';
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'twitter-wjs'));
  (function () {
    var po = document.createElement('script');
    po.type = 'text/javascript';
    po.async = true;
    po.src = 'https://apis.google.com/js/platform.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(po, s);
  })();
